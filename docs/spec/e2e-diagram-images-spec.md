# E2E テスト仕様: ダイアグラム画像表示

## 背景・目的（Why）

Docker チュートリアルサイトに95枚のダイアグラムPNG画像が追加され、48個のMarkdownファイルから参照されている。
Section.tsx にカスタム `img` コンポーネント（`loading="lazy"` 属性付き）が実装され、
CSS でダイアグラム画像のスタイリング（block表示、center、ダークモード対応）が適用されている。

これらの画像がセクションページ上で正しく表示されることを E2E テストで保証する。

## 機能要件（What）

### テスト対象

1. **画像表示**: ダイアグラム画像を含むセクションページで、`img` 要素が DOM に存在し visible であること
2. **loading 属性**: カスタム img コンポーネントにより `loading="lazy"` が付与されること
3. **alt 属性**: Markdown の alt テキストが `img` 要素の `alt` 属性に正しく設定されること
4. **画像パス**: `src` 属性が `/images/diagrams/` で始まる正しいパスであること
5. **ダークモード対応**: ダークモード時に画像に背景・パディング・ボーダーが適用されること

### テスト対象セクション

- `chapter-01/section-01`: `docker-image-container.png`, `docker-microservices.png` の2枚を含む
- 画像を含まないセクション（ネガティブケース確認用）

## 非機能要件

- テストは既存の Page Object パターン（SectionPage）を再利用する
- テストタイムアウトは 60 秒以内
- 画像の HTTP レスポンスステータスが 200 であることの検証は行わない（静的ファイルのため）

## 想定ユースケース

1. ユーザーが section-01 を表示 -> ダイアグラム画像が表示される
2. ダークモードで section-01 を表示 -> 画像に白背景・ボーダーが適用される

## 入出力仕様

### テストで使用するセレクタ

- 画像要素: `article.prose-docker img[src*="/images/diagrams/"]`
- ダークモード判定: `html.dark`

### テストで検証する属性

| 属性 | 期待値 |
|------|--------|
| `src` | `/images/diagrams/*.png` パターン |
| `alt` | 空でない文字列 |
| `loading` | `"lazy"` |

## エラーケース・例外条件

- 画像ファイルが存在しない場合は本テストのスコープ外
- ネットワークエラーは本テストのスコープ外（ローカル開発サーバー前提）

## 受け入れ条件（Acceptance Criteria）

- [ ] ダイアグラム画像を含むセクションで img 要素が visible であること
- [ ] img 要素に `loading="lazy"` が設定されていること
- [ ] img 要素の alt 属性が Markdown の記述と一致すること
- [ ] img 要素の src が `/images/diagrams/` パスであること
- [ ] ダークモード時に画像の computed style が適切であること
- [ ] 全ての既存 E2E テスト（46件）が引き続きパスすること
